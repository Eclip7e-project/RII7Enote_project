<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RII7E Sticky Notes Project</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#d4af37;
  --bg:#000;
  --panel:#111;
  --muted:#ddd;
}
html,body{margin:0;padding:0;background:var(--bg); color:#fff;font-family:'Playfair Display',serif;}
header{display:flex;flex-direction:column;align-items:center;background:#000;border-bottom:3px solid var(--gold);}
header img.banner{width:100%;height:auto;object-fit:contain;background:#000;display:block;}
.header-text{padding:18px 20px;text-align:center;}
.header-text h1{color:var(--gold);font-size:2.4rem;margin:8px 0;text-shadow:2px 2px 6px rgba(0,0,0,.6)}
.header-text p{max-width:820px;margin:0 auto;color:#fff;font-size:1rem;line-height:1.45;text-shadow:1px 1px 3px rgba(0,0,0,.6)}
nav{background:var(--panel);border-bottom:2px solid var(--gold); display:flex; justify-content:center; flex-wrap:wrap; padding:12px 10px; position:sticky; top:0; z-index:40;}
nav a{color:var(--gold); text-decoration:none; margin:6px 12px; font-weight:600;}
nav a:hover{color:#fff;text-decoration:underline;}
main{padding:28px;}
h2{color:var(--gold); text-align:center; margin:8px 0 18px;}
.member-section{margin-top:34px; text-align:center;}
.member-section h3{margin-bottom:12px;color:var(--muted);letter-spacing:1px;}
.wall{display:flex;flex-wrap:wrap;justify-content:center;gap:18px;}
.sticky-note{width:150px;min-height:150px;background:#fff;border-radius:12px;padding:8px;box-shadow:0 6px 18px rgba(0,0,0,.6);position:relative;cursor:pointer;overflow:hidden;display:flex;align-items:center;justify-content:center;}
.sticky-note img{width:100%;height:100%;object-fit:cover;border-radius:8px;display:block;}
.sticky-note .label{position:absolute;bottom:6px;left:8px;right:8px;font-size:12px;color:#111;background:rgba(255,255,255,.85);padding:4px;border-radius:6px;text-align:center}
#simple-notes .sticky-note{width:110px;height:110px}
.design-container img{width:100px;border-radius:10px;border:2px solid; margin:6px;}
.design-container div{display:inline-block;position:relative;margin:6px;}
#info-section{padding:36px;background:var(--panel);border-radius:12px;margin:40px auto 0;max-width:980px;border-top:2px solid var(--gold);}
#info-section h2{color:var(--gold);margin-bottom:14px;}
#info-section ul{padding-left:22px;color:#fff;}
.btn-placeholder{display:inline-block;margin-top:14px;padding:10px 16px;background:var(--gold);color:#000;border-radius:8px;text-decoration:none;font-weight:700;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:60;align-items:center;justify-content:center;padding:24px}
.modal-content{background:#fff;color:#000;border-radius:12px;max-width:820px;width:100%;padding:18px;position:relative;overflow:hidden}
.close{position:absolute;right:14px;top:10px;font-size:26px;cursor:pointer}
.modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.modal-left{position:relative;border-radius:8px;overflow:hidden}
.modal-left img{width:100%;height:100%;object-fit:contain;display:block;border-radius:8px}
.preview-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:12px;pointer-events:none;text-align:center}
.preview-overlay .preview-text{font-size:1.1rem; font-weight:700; text-shadow: 1px 1px 3px rgba(0,0,0,.6); word-break:break-word}
.modal-right label{display:block;margin-top:8px;font-weight:600}
.modal-right textarea{width:100%;min-height:120px;padding:8px;border-radius:8px;border:1px solid #ccc;resize:none}
.modal-right input[type="color"]{height:40px;width:56px;border:none;padding:0;margin-top:6px}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
.btn{padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
.btn-submit{background:var(--gold);font-weight:700}
.btn-cancel{background:#eee;color:#111}
@media (max-width:800px){
  .modal-grid{grid-template-columns:1fr; max-height:85vh; overflow:auto}
}
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.31.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.31.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

</head>
<body>
<header>
  <img class="banner" src="banner2.jpg" alt="RII7E banner">
  <div class="header-text">
    <h1>RII7E Sticky Notes Project</h1>
    <p>Pick a sticky note for your favorite member, write your message, and submit! Your message will appear on the member’s wall instantly. Weekly top-liked notes will be highlighted.</p>
  </div>
</header>

<nav>
  <a href="index.html">HOME</a>
  <a href="shotaro.html">SHOTARO</a>
  <a href="eunseok.html">EUNSEOK</a>
  <a href="sungchan.html">SUNGCHAN</a>
  <a href="wonbin.html">WONBIN</a>
  <a href="seunghan.html">SEUNGHAN</a>
  <a href="sohee.html">SOHEE</a>
  <a href="anton.html">ANTON</a>
  <a href="rii7e.html">RII7E</a>
  <a href="brii7e.html">BRII7E</a>
  <a href="favorites.html">FAVORITES</a>
  <a href="gallery.html">GALLERY</a>
</nav>

<main>
<section id="note-selection">
<h2>Pick a Sticky Note</h2>
<div class="member-section" id="shotaro-selection"><h3>SHOTARO</h3><div class="wall" data-member="shotaro"></div></div>
<div class="member-section" id="eunseok-selection"><h3>EUNSEOK</h3><div class="wall" data-member="eunseok"></div></div>
<div class="member-section" id="sungchan-selection"><h3>SUNGCHAN</h3><div class="wall" data-member="sungchan"></div></div>
<div class="member-section" id="wonbin-selection"><h3>WONBIN</h3><div class="wall" data-member="wonbin"></div></div>
<div class="member-section" id="seunghan-selection"><h3>SEUNGHAN</h3><div class="wall" data-member="seunghan"></div></div>
<div class="member-section" id="sohee-selection"><h3>SOHEE</h3><div class="wall" data-member="sohee"></div></div>
<div class="member-section" id="anton-selection"><h3>ANTON</h3><div class="wall" data-member="anton"></div></div>
<div class="member-section" id="rii7e-selection"><h3>RII7E</h3><div class="wall" data-member="rii7e"></div></div>
<div class="member-section" id="brii7e-selection"><h3>BRII7E</h3><div class="wall" data-member="brii7e"></div></div>

<div class="member-section" id="simple-notes">
<h3>Plain Sticky Notes</h3>
<p style="max-width:720px;margin:6px auto 12px;color:#ddd;">Prefer something minimal? Click a plain one-color sticky note, pick a member, choose your text color, and write your message, you'll preview the text on the note in real time.</p>
<div class="wall" id="simple-note-wall"></div>
</div>
</section>

<section id="design-submission" style="margin-top:36px;">
<h2>Submit Your Sticky Note Design</h2>
<p style="max-width:720px;margin:0 auto 12px;color:#ddd;">Upload your design so other fans can use it (designs are reviewed and added every two weeks).</p>
<div style="max-width:720px;margin:0 auto;display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:center;">
<input type="file" id="design-file" accept="image/*">
<select id="design-member">
<option value="shotaro">SHOTARO</option><option value="eunseok">EUNSEOK</option><option value="sungchan">SUNGCHAN</option>
<option value="wonbin">WONBIN</option><option value="seunghan">SEUNGHAN</option><option value="sohee">SOHEE</option>
<option value="anton">ANTON</option><option value="rii7e">RII7E</option><option value="brii7e">BRII7E</option>
</select>
<button id="submitDesign" class="btn btn-submit">Submit Design</button>
</div>
<p id="design-msg" style="color:var(--gold);text-align:center;margin-top:10px;"></p>
</section>

<section id="design-management" style="margin-top:28px;">
<h2>Manage Your Designs</h2>
<div id="designContainer" class="design-container" style="text-align:center;margin-top:12px"></div>
</section>

<section id="info-section">
<h2>Info & Guidelines</h2>
<p>Welcome to the RII7E Sticky Notes Project! Here’s how it works:</p>
<ul>
<li>Pick a sticky note for your favorite member and write your message (up to 300 characters).</li>
<li>Submitted notes will appear instantly on the member's wall.</li>
<li>You can only delete <strong>your own submissions</strong>.</li>
<li>Give love by clicking the ❤️ button! Each note can only be liked once per browser.</li>
<li>Weekly top-liked notes are highlighted with a gold border and also appear on the Favorites page.</li>
</ul>
</section>

</main>

<!-- Modal -->
<div class="modal" id="noteModal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div class="modal-grid">
      <div class="modal-left">
        <img id="modalImg" src="" alt="Sticky note">
        <div class="preview-overlay"><div class="preview-text" id="modalPreview">Your text here</div></div>
      </div>
      <div class="modal-right">
        <label for="noteText">Write your note:</label>
        <textarea id="noteText" maxlength="300"></textarea>
        <label for="colorPicker">Text color:</label>
        <input type="color" id="colorPicker" value="#000000">
        <div class="modal-actions">
          <button class="btn btn-submit" id="modalSubmit">Submit</button>
          <button class="btn btn-cancel" id="modalCancel">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
let currentImg='', currentMember='';

function genID(){ return 'id'+Date.now()+Math.floor(Math.random()*999); }

function getMemberColor(name){
  const colors = {shotaro:'#ff6363',eunseok:'#6366ff',sungchan:'#63ffb0',wonbin:'#ffb763',seunghan:'#b763ff',sohee:'#63fff6',anton:'#ff63c9',rii7e:'#f5f563',brii7e:'#63f57c'};
  return colors[name]||'#fff';
}

function openModalForMember(member,img){
  currentImg=img; currentMember=member;
  document.getElementById('modalImg').src=img;
  document.getElementById('noteText').value='';
  document.getElementById('modalPreview').textContent='';
  document.getElementById('colorPicker').value='#000000';
  document.getElementById('noteModal').style.display='flex';
}

function closeModal(){ document.getElementById('noteModal').style.display='none'; }

document.querySelector('.close').onclick=closeModal;
document.getElementById('modalCancel').onclick=closeModal;

document.getElementById('noteText').addEventListener('input',()=>{document.getElementById('modalPreview').textContent=document.getElementById('noteText').value;});
document.getElementById('colorPicker').addEventListener('input',()=>{document.getElementById('modalPreview').style.color=document.getElementById('colorPicker').value;});

document.getElementById('modalSubmit').addEventListener('click',()=>{
  const text=document.getElementById('noteText').value.trim();
  if(!text){alert('Write something!'); return;}
  const color=document.getElementById('colorPicker').value;
  const week='week'+(new Date().getWeekNumber());
  const id=genID();
  const noteData={id,img:currentImg,text,color,likes:0,week};
  db.ref('notes/'+currentMember+'/'+id).set(noteData)
    .then(()=>{closeModal();alert(`Your note has been submitted to ${currentMember.toUpperCase()}'s wall!`);})
    .catch(err=>alert('Error: '+err));
});

function getCurrentWeekNumber(d=new Date()){ const onejan=new Date(d.getFullYear(),0,1); return Math.ceil((((d-onejan)/86400000)+onejan.getDay()+1)/7);}
Date.prototype.getWeekNumber=getCurrentWeekNumber;

function renderSelectionWall(memberName){
  const wall=document.querySelector(`#${memberName}-selection .wall`);
  if(!wall) return; wall.innerHTML='';
  for(let i=1;i<=4;i++){
    const imgFile=memberName+i+'.png';
    const note=document.createElement('div');
    note.className='sticky-note';
    note.style.border=`4px solid ${getMemberColor(memberName)}`;
    note.innerHTML=`<img src="${imgFile}" alt="${memberName} placeholder ${i}">`;
    note.onclick=()=>openModalForMember(memberName,imgFile);
    wall.appendChild(note);
  }
  db.ref('notes/'+memberName).on('value',snap=>{
    const notes=snap.val()||{};
    Array.from(wall.querySelectorAll('.user-note')).forEach(n=>n.remove());
    Object.values(notes).forEach(nData=>{
      const note=document.createElement('div');
      note.className='sticky-note user-note';
      note.style.border=`4px solid ${getMemberColor(memberName)}`;
      note.innerHTML=`<img src="${nData.img}" alt="User note"><div class="label" style="color:${nData.color}">${nData.text}</div>`;
      note.onclick=()=>openModalForMember(memberName,nData.img);
      wall.appendChild(note);
    });
  });
}

['shotaro','eunseok','sungchan','wonbin','seunghan','sohee','anton','rii7e','brii7e'].forEach(renderSelectionWall);

// Design submission
document.getElementById('submitDesign').onclick=()=>{
  const file=document.getElementById('design-file').files[0];
  const member=document.getElementById('design-member').value;
  if(!file){alert('Select a file'); return;}
  const reader=new FileReader();
  reader.onload=e=>{
    const designs=JSON.parse(localStorage.getItem('designs')||'{}');
    designs[member]=designs[member]||[];
    designs[member].push(e.target.result);
    localStorage.setItem('designs',JSON.stringify(designs));
    document.getElementById('design-msg').textContent='Design submitted! It will appear in the wall.';
    renderDesigns();
  }
  reader.readAsDataURL(file);
}

function renderDesigns(){
  const container=document.getElementById('designContainer');
  container.innerHTML='';
  const designs=JSON.parse(localStorage.getItem('designs')||'{}');
  Object.entries(designs).forEach(([member,arr])=>{
    arr.forEach((img,i)=>{
      const div=document.createElement('div');
      div.innerHTML=`<img src="${img}" style="border:2px solid ${getMemberColor(member)}"><button onclick="deleteDesign('${member}',${i})" class="btn btn-cancel" style="position:absolute;top:0;right:0;font-size:12px;padding:2px 4px">X</button>`;
      container.appendChild(div);
    });
  });
}
window.deleteDesign=(member,index)=>{
  const designs=JSON.parse(localStorage.getItem('designs')||'{}');
  if(!designs[member]) return;
  designs[member].splice(index,1);
  localStorage.setItem('designs',JSON.stringify(designs));
  renderDesigns();
}
renderDesigns();
</script>
</body>
</html>

